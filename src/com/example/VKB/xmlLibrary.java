/*******************************************************************************
 * xmlLibrary.java
 *
 * AMAÇ:
 *
 * Bu sýnýf ile xmlLibrary iþlemleri gerçeklenmektedir. 
 * Bu sýnýf Im_YeniDosyaAcmaAyari, Im_VarolanDosyayiAcmaAyari, Im_BelgedenStringYarat, Im_XMLOlustur, Im_XMLVeriOku,
 * Im_XMLEtiketEkle, Im_XMLEtiketIsmiGuncelle, Im_XMLEtiketSil, Im_XMLVeriYaz, Im_XMLVeriGuncelle, Im_XMLVeriSil
 * fonksiyonlarýný içermektedir. 
 *
 * ERÝÞÝM: Public
 *
 * GLOBAL DEÐÝÞKENKER:
 *
 * FONKSÝYON PROTOTÝPLERÝ:
 *
 * public Document Im_YeniDosyaAcmaAyari()
 * 
 * public Document Im_VarolanDosyayiAcmaAyari( String str_dosya_klasoru,
 *		   									   String str_XML_dosyasi_ismi)
 * 
 * public String Im_BelgedenStringYarat(Document belge)
 * 
 * public void Im_DosyaKaydet( String str_klasor_adi,
 *		   					   	String str_dosya_adi,
 *		   					   	String str_kaydedilecek_dosya )
 * 
 * public void Im_XMLOlustur( String str_dosya_adi, 
 * 							  String str_klasor_adi, 
 * 							  String str_kok_etiket,
 *							  String [] str_alt_eleman )
 *
 * public void Im_XMLOlustur()
 * 
 * public String Im_XMLVeriOku( String str_dosya_klasoru, 
 * 								String str_XML_dosyasi_ismi, 
 *			   					String str_veri_okunacak_etiket )
 *
 * public void Im_XMLEtiketEkle( String str_dosya_klasoru,
 * 							     String str_XML_dosyasi_ismi, 
 * 							     String str_belirtec_etiket,
 * 							     String str_eklenecek_etiket_ismi,
 * 							     String str_icerisine_yazilacak_deger )
 * 
 * public void Im_XMLEtiketIsmiGuncelle( String str_dosya_klasoru,
 * 									     String str_XML_dosyasi_ismi, 
 *		 						   	  	 String str_ismi_degistirilecek_olan_etiket, 
 *									  	 String str_yeni_isim )
 *
 * public void Im_XMLEtiketSil( String str_dosya_klasoru,
 * 							    String str_XML_dosyasi_ismi,
 * 							    String str_silinecek_etiket )
 * 
 * public void Im_XMLVeriYaz( String str_dosya_klasoru, 
 * 							  String str_acilacak_XML_dosyasi_ismi, 
 * 							  String str_icinde_degisiklik_yapilacak_etiket, 
 * 							  String str_veri_girilecek_etiket_elemani, 
 *							  String str_girilecek_veri, 
 *							  String str_yeni_dosya_ismi, 
 *							  String str_yeni_XMLin_kaydedilecegi_dosya )
 *
 * public void Im_XMLVeriGuncelle( String str_dosya_klasoru, 
 *                                 String str_gulcellencek_XML_dosyasi_ismi, 
 * 								   String str_icerisinde_guncelleme_yapilacak_etiket,
 * 								   String str_guncelleme_yapýlacak_etiket_elemani, 
 *								   String str_yeni_veri	)
 *
 * public void Im_XMLVeriSil( String str_dosya_klasoru,
 * 							  String str_XML_dosyasi_ismi, 
 * 							  String str_icinde_degisiklik_yapilacak_etiket,
 *							  String str_verisi_silinecek_etiket_elemaný )
 * 
 * NOTLAR: Fonksiyonlar içerisinde türkçe karakter içeren etiket ismi, klasör ismi, dosya adý gibi 
 * parametreler girilmesi durumunda fonksiyonlar herhangi bir hata vermemektedir. Fakat iþlevlerini
 * gerçekleþtirememektedir.	
 * 
 * GELÝÞTÝRME GEÇMÝÞÝ:
 *
 * Yazar: Cem YENÝÇERÝ
 * Tarih: 25.04.2013
 * Güncelleme Tarihi: 
 * Versiyon: v_1.0
 *
 */
package com.example.VKB;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.io.Serializable;
import java.io.StringWriter;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.w3c.dom.Text;
import org.xml.sax.SAXException;


public class xmlLibrary
{
	 /********************************************************************************************
	 * 
	 * FONKSÝYON ADI: 				Im_YeniDosyaAcmaAyari
	 * FONKSÝYON AÇIKLAMASI: 		Bu fonksiyon, diðer fonksiyonlarda kullanýlmak için yazýlmýþ olup,
	 * herhangi bir xmlLibrary dosya iþleminin yapýlabilmesi için gerekli düzenlemeleri yapan fonksiyondur.
	 *
	 * ERÝÞÝM: Public
	 * 
	 * PARAMETRELER: YOK
	 * 			ADI				TÝPÝ				AÇIKLAMASI
	 *
	 * DÖNÜÞ:	
	 * 			ADI				TÝPÝ				AÇIKLAMASI
	 *			belge			Document			Gerekli düzenlemeler yapýlarak belge deðiþkeni hazýrlanýr ve döndürülür.			
	 *
	 * GEREKLÝLÝK: 	Herhangi bir xmlLibrary dosyasý iþlemi yapabilabilmesi için öncelikle bu fonksiyonun 
	 * çaðrýlmasý gerekmektedir.
	 *
	*********************************************************************************************/	
    public Document Im_YeniDosyaAcmaAyari()
    {
        try
        {
        	/**
	  		 * xmlLibrary belgesi oluþturmak için ilk olarak belge_ureteci nesnesi oluþturuldu.
	  		 * Normal JAVA dan farklý olarak Android için newInstance metodu kullanýlmasý gerekmektedir.
	  		 * 
	  		 * belge_yapici nesnesi bir xmlLibrary belgesinden DOM belgesi elde edebilmek için oluþturuldu.
	  		 * 
	  		 * belge isimli bir DOM örneði yaratýldý. DOM ile bir xmlLibrary belgesinin içeriði,stili ve yapýsý görülüp deðiþtirilebilir.
	  		 */ 	
        	DocumentBuilderFactory belge_ureteci = DocumentBuilderFactory.newInstance();
	   		DocumentBuilder belge_yapici = belge_ureteci.newDocumentBuilder();
	   		Document belge = belge_yapici.newDocument();
	   		return belge;
	    } 
        catch (ParserConfigurationException e) 
        {
			e.printStackTrace();
			return null;
	    }		
    }
    
    
	 /********************************************************************************************
	 * 
	 * FONKSÝYON ADI: 				Im_VarolanDosyayiAcmaAyari
	 * FONKSÝYON AÇIKLAMASI: 		Bu fonksiyon diðer fonksiyonlarda kullanýlmak için yazýlmýþ olup
	 * herhangi varolan xmlLibrary dosyasý üzerinde iþlem yapýlabilmmek için gerekli düzenlemeleri yapan fonk
	 * siyondur.
	 *
	 * ERÝÞÝM: Public
	 * 
	 * PARAMETRELER: YOK
	 * 			ADI						TÝPÝ				AÇIKLAMASI
	 *			str_dosya_klasoru		String				Açýlacak dosyanýn bulunduðu klasörü tutan deðiþkendir.
	 *			str_XML_dosyasi_ismi	String				Açýlacak olan dosyanýn ismini tutan deðiþkendir.
	 * DÖNÜÞ:	
	 * 			ADI						TÝPÝ				AÇIKLAMASI
	 *			belge					Document			Gerekli düzenlemeler yapýlarak belge deðiþkeni hazýrlanýr ve döndürülür.			
	 *
	 * GEREKLÝLÝK: 	Herhangi bir xmlLibrary dosyasý iþlemi yapabilabilmesi için öncelikle bu fonksiyonun 
	 * çaðrýlmasý gerekmektedir.
	 *
	*********************************************************************************************/	
   public Document Im_VarolanDosyayiAcmaAyari( String str_dosya_klasoru,
		   									   String str_XML_dosyasi_ismi )
   {
       try
       {	
    	   /**
    	    * ??
    	    */
    	   	DocumentBuilderFactory dosya_uretici = DocumentBuilderFactory.newInstance();
		    DocumentBuilder dosya_yapici = dosya_uretici.newDocumentBuilder();
		    Document dosya = null;
			try {
				dosya = dosya_yapici.parse(new File("/sdcard/"+ str_dosya_klasoru +"/"+ str_XML_dosyasi_ismi + ".xml"));
				dosya.normalizeDocument(); 
		   		return dosya;
			} catch (SAXException e) {
				e.printStackTrace();
				return dosya;
			} catch (IOException e) {
				e.printStackTrace();
				return dosya;
			}
	    } 
       catch (ParserConfigurationException e) 
       {
			e.printStackTrace();
			return null;
	    }		
   }
    
     /********************************************************************************************
	 *
	 * FONKSÝYON ADI: 				Im_BelgedenStringYarat
	 * FONKSÝYON AÇIKLAMASI: 		Belgeden String yaratýlmasý iþlemini gerçekleþtirir.
	 * 
	 * ERÝÞÝM: Public
	 * 
	 * PARAMETRELER:
	 * 			ADI				TÝPÝ				AÇIKLAMASI
	 *		   	belge		   	Document			Dönüþtürülmesi gereken belge parametre olarak verilir.
	 *
	 * DÖNÜÞ:
	 * 			ADI				TÝPÝ				AÇIKLAMASI
	 *			str_yazici		String				Belgenin kullanýlmak üzere String olarak döndürüleceði deðiþkendir.
	 *
	 * GEREKLÝLÝK: 	Bu fonksiyon ile yaratýlmasý planlanan xmlLibrary dosya yapýsý String e dönüþtürülüp
	 * dosyanýn yaratýlmasý iþleminin gerçekleþtiði kýsýma aktarýlmasýnda kullanýlýr. 
	 *
	*********************************************************************************************/
    public String Im_BelgedenStringYarat(Document belge)
    {
        try
        {
        	/**
        	 * ??
        	 */
           DOMSource belge_kaynagi = new DOMSource(belge);
           StringWriter yazici = new StringWriter();
           StreamResult sonuc = new StreamResult(yazici);
           TransformerFactory donusum_ureteci = TransformerFactory.newInstance();
           Transformer donusturucu = donusum_ureteci.newTransformer();
           donusturucu.transform(belge_kaynagi, sonuc);
           String str_yazici = yazici.toString();;
           return str_yazici;
        }
        catch(TransformerException ex)
        {
           ex.printStackTrace();
           return null;
        }
    }
    
    
     /********************************************************************************************
	 *
	 * FONKSÝYON ADI: 				Im_DosyaKaydet
	 * FONKSÝYON AÇIKLAMASI: 		Ýþlemi tamamlanan bir xmlLibrary doyasýný belirtilen klasör altýnda belir
	 * tilen isim ile kaydeden fonksiyondur.
	 * 
	 * ERÝÞÝM: Public
	 * 
	 * PARAMETRELER:
	 * 			ADI						TÝPÝ				AÇIKLAMASI
	 *		  	str_klasor_adi			String				Ýçerisine kaydedilecek olan klasöre ait ismi tutan deðiþkendir.
	 *			str_dosya_adi			String				Kaydedilecek olan dosyaya ait ismi tutan deðiþkendir.
	 *			str_kaydedilecek_dosya	String				Kaydedilecek olan dosyanýn tutulduðu deðiþkendir.
	 *
	 * DÖNÜÞ: YOK
	 * 			ADI						TÝPÝ				AÇIKLAMASI
	 *		
	 * GEREKLÝLÝK: 	Ýstenildiði þekilde düzenlenen xmlLibrary dosyalarýnýn kaydedilmesi iþleminin yapýlmasý
	 * için gereklidir.
	 *
	*********************************************************************************************/
    public void Im_DosyaKaydet( String str_klasor_adi,
		   					   	String str_dosya_adi,
		   					   	String str_kaydedilecek_dosya
		   					  )
    {
		try 
		{
			/*Dosyanýn kaydedileceði dizin oluþturulmaktadýr.*/
			String str_dizin = "/mnt/sdcard/" + str_klasor_adi + "/" + str_dosya_adi + ".xml";
			
			/*Belirtilen dizinde dosya yapýlandýrýr.*/
			File yeni_dosya = new File(str_dizin);
			
			/**
			 * Eðer böyle bir klasör belirtilen dizinde yoksa,öncelikle klasör yaratýlýr.  
			 */
			if(!yeni_dosya.exists())
			{
				yeni_dosya.getParentFile().mkdir();	    				
			}
			
			/**
			 * Özellikleri belirtilen dosya yaratýlýr
			 * ve xmlLibrary den String e dönüþtürülen yapý dosya içerisine byte byte atýlýr.
			 * Daha sonra oluþturulan dosya kapanýr. 
			 */
			yeni_dosya.createNewFile();
			
			FileOutputStream dosya_cikti = new FileOutputStream(yeni_dosya);
			
			OutputStreamWriter cikti_yazici = new OutputStreamWriter(dosya_cikti);
			cikti_yazici.append(str_kaydedilecek_dosya);
			cikti_yazici.close();
			
			dosya_cikti.close();
		} 
		catch (Exception e)
		{
		}
    }
    
	
     /********************************************************************************************
	 *
	 * FONKSÝYON ADI: 				Im_XMLOlustur
	 * FONKSÝYON AÇIKLAMASI: 		Bu fonksiyon istenilen klasörde ve dosya isminde, istenilen yapýda 
	 * xmlLibrary belgesi oluþturabilen fonksiyondur.
	 *
	 * ERÝÞÝM: Public
	 * 
	 * PARAMETRELER:
	 * 			ADI					TÝPÝ							AÇIKLAMASI
	 *			str_klasör_adi		String							Dosyanýn /sdcard/ yolu içerisinde kaydedileceði klasörün adýný tutan deðiþkendir.
	 *			str_dosya_adi		String							Dosyanýn /sdcard/klasör_adi/ yolu içinde hangi isimle kaydedileceðini tutan deðiþkendir.
	 *			str_kok_etiket		String							xmlLibrary dosyasýnýn sahip olacaðý kök elemanýn tutuldðu deðiþkendir.	
	 *			str_alt_etiket		String							xmlLibrary dosyasýnýn sahip olacaðý alt elemanýn tutuldðu deðiþkendir.
	 *			str_alt_eleman		String Array					xmlLibrary dosyasýnda kök eleman altýnda bulunacak alt elemanlarý tutan dizi deðiþkenidir.
	 *			TransmitterPoints	ArrayList<TransmitterPointsRecord>  Transmitter     Koordinat deðerlerini tutacak deðiþken
	 *
	 * DÖNÜÞ: YOK
	 * 			ADI					TÝPÝ				AÇIKLAMASI
	 *
	 * GEREKLÝLÝK: 	Bu fonksiyon daha önce oluþturulmamýþ bir xmlLibrary belgesinin istenilen özelliklerde
	 * oluþturulmasýna esnek bir þekilde olanak saðlamaktadýr.
	 *
	*********************************************************************************************/
	public void Im_XMLOlustur ( String str_klasor_adi,
								String str_dosya_adi,
							    String str_kok_etiket,
							    String str_alt_etiket,
							    ArrayList<TransmitterPointsRecord> TransmitterPoints)
	{
		try
		{	 
			Document belge= Im_YeniDosyaAcmaAyari(); /*Dosya açmak için ayar fonksiyonu çaðrýlmaktadýr.*/
		  	
	   		Element kok_eleman = belge.createElement(str_kok_etiket);	 /* kok_eleman isimli xmlLibrary kök etiketi yaratýldý*/
	   		belge.appendChild(kok_eleman);								 /* Oluþturulan kok_eleman belgeye eklendi.*/
		   		
	   		/**
	   		 * Bu döngü ile kok_eleman etiketinin altýnda yer alacak alt elemanlar yaratýlmýþtýr.
	   		 * alt1_eleman ile temsil edileceklerdir.
	   		 */
		   	for(int i = 0; i < TransmitterPoints.size(); i++)
		   	{	
	   	  		
	   			/*Parametre olarak tanýmlý alt1 elemaný yaratýlýp kok_eleman ýn altýna eklenmiþtir.*/
	   	  		Element alt1_eleman = belge.createElement(str_alt_etiket);	
	   	  		kok_eleman.appendChild(alt1_eleman);
	   	  		
      	  		Attr attr = belge.createAttribute("id");
      	  		attr.setValue("Transmitter" + ":" + String.valueOf(i+1));
      	  		alt1_eleman.setAttributeNode(attr);
	   	      	   
	   	  		/*alt2_1_eleman alt1_eleman ýn altýnda yer alacak alt elemanlardan birisidir.*/
	   	  		Element alt2_1_eleman = belge.createElement("X_Coordinate");
	   	  		alt2_1_eleman.appendChild(belge.createTextNode(String.valueOf(TransmitterPoints.get(i).getTransmitterX())));
	   	  		alt1_eleman.appendChild(alt2_1_eleman);
	   	  		
	   	  		/*alt2_2_eleman alt1_eleman ýn altýnda yer alacak alt elemanlardan birisidir.*/
	   	  		Element alt2_2_eleman = belge.createElement("Y_Coordinate");
	   	  		alt2_2_eleman.appendChild(belge.createTextNode(String.valueOf(TransmitterPoints.get(i).getTransmitterY())));
	   	  		alt1_eleman.appendChild(alt2_2_eleman);
	   	  		
	   	  		/*alt2_3_eleman alt1_eleman ýn altýnda yer alacak alt elemanlardan birisidir.*/	
	   	  		Element alt2_3_eleman = belge.createElement("Z_Coordinate");
	   	  		alt2_3_eleman.appendChild(belge.createTextNode(String.valueOf(TransmitterPoints.get(i).getTransmitterZ())));
	   	  		alt1_eleman.appendChild(alt2_3_eleman);
	   		} 	
		   		
	   		/* belgeden String e dönüþüm yapabilmek için str_string_belgeden nesnesi yaratýlmýþtýr.*/
	   		String str_string_belgeden = Im_BelgedenStringYarat(belge);
	   		/*Dosya kaydet fonksiyonu çaðrýlarak yapýlan iþlemler belirtilen konuma, belirtilen isim ile kaydedildi.*/
	   		Im_DosyaKaydet(str_klasor_adi, str_dosya_adi, str_string_belgeden);
		}
		catch(Exception e)
		{
			
		}
	}
	
	/********************************************************************************************
	*
	* FONKSÝYON ADI: 				Im_XMLVeriOku
	* FONKSÝYON AÇIKLAMASI: 		Bu fonksiyon belirtilen xmlLibrary belgesi içerisinde belirtilen etikete ait
	* deðeri okuma iþlemini yapmaktadýr.
	* 
	* ERÝÞÝM: public
	* 
	* PARAMETRELER:	
	* 		ADI							TÝPÝ			AÇIKLAMASI
	*		str_dosya_klasoru			String			Ýçerisinden veri okunacak olan xmlLibrary belgesinin bulunduðu klasörün tutulduðu deðiþkendir.
	*		str_XML_dosyasi_ismi		String			Ýçerisinden etiket deðeri okunacak olan xmlLibrary belgesinin isminin tutulduðu deðiþkendir.	
	*		str_veri_okunacak_etiket	String			Hangi etikete ait deðerin okunacaðýnýn tutulduðu deðiþkendir.
	* 
	* DÖNÜÞ:
	* 		ADI							TÝPÝ			AÇIKLAMASI
	* 		str_okunan_veri					String
	*	
	* GEREKLÝLÝK: 	Bir xmlLibrary belgesi içerisinde herhangi bir etiket altýndaki deðerin okunmasý gerektiði
	* durumlar için kullanýlmaktadýr.
	* 
	*********************************************************************************************/
	public String Im_XMLVeriOku( String str_dosya_klasoru, 
   						 		 String str_XML_dosyasi_ismi, 
   						 	     String str_veri_okunacak_etiket
		  					   )
	{
		String str_okunan_veri = "Veri Yok!"; /*Belirtilen yolda herhangi bir veri bulunamazsa dönecek deðerdir.*/
		try
		{
			Document belge = Im_VarolanDosyayiAcmaAyari(str_dosya_klasoru, str_XML_dosyasi_ismi); /*Dosya açmak için ayar fonksiyonu çaðrýlmaktadýr.*/
	    
		    /**
		     * belge.getElementsByTagName ile içerisinde deðiþiklik yapýlmak istenen etiketler, NodeList tipinde
		     * etiketlere atandý ve oluþturulan NodeList etiketlerinden istenen etikete ait içerik getTextContent() ile çaðrýldý.
		     * Okunmak istenen deðer str_okunan_veri deðiþkenine atandý.
		     */
		    NodeList etiketler = belge.getElementsByTagName(str_veri_okunacak_etiket);
			for (int i =0; i<etiketler.getLength();i++)
			{
			    Node eleman = etiketler.item(i);
			    
			    if(str_veri_okunacak_etiket.equals(eleman.getNodeName()))
			    {
			        str_okunan_veri=eleman.getTextContent(); 	/*Verinin dönüþ deðerine yüklenme iþlemi*/
			    }
		    }
	 	}
		catch (Exception e) 
		{	
			e.printStackTrace();
		}
		return str_okunan_veri;
	}	
	
	
	
	
	/********************************************************************************************************************************
	 ******************************************************************************************************************************** 
	 *******************************************************************************************************************************
	 * Buradaki System.Out.println() ler kalkacak ve nesneye atanacak......
	 *
	 **/
	
	public ArrayList<MeasurementsPointsRecord> xmlgen( String str_XML_dosyasi_ismi,ArrayList<MeasurementsPointsRecord>measurements) {
		    try {		    	
		    	
				File fXmlFile = new File("/sdcard/"+ str_XML_dosyasi_ismi + ".xml");
				DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
				DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
				Document doc = dBuilder.parse(fXmlFile);
			 
				doc.getDocumentElement().normalize();
				
				NodeList listOfTransmitter = doc.getElementsByTagName("Transmitter");

	            for(int s=0; s<listOfTransmitter.getLength() ; s++){


	                Node firstTransmitterNode = listOfTransmitter.item(s);
	                if(firstTransmitterNode .getNodeType() == Node.ELEMENT_NODE){


	                    Element TransmitterElement = (Element)firstTransmitterNode ;

	                    //-------
	                    NodeList TransmitterNameList = TransmitterElement.getElementsByTagName("TransmitterName");
	                    Element TransmitterNameElement = (Element)TransmitterNameList .item(0);

	                    NodeList textFNList = TransmitterNameElement.getChildNodes();
	                        //----

	                   NodeList listOfTransmitterNames = TransmitterElement.getElementsByTagName("MobilePoint");
	                    for(int i=0; i<listOfTransmitterNames.getLength() ; i++){


	                Node firstMobilePointNode = listOfTransmitterNames.item(i);
	                 if(firstMobilePointNode .getNodeType() == Node.ELEMENT_NODE){

	                    Element classElement = (Element)firstMobilePointNode;
	                    //----

	                        NodeList MobilePointNameList = classElement .getElementsByTagName("MobilePointName");
	                        Element MobilePointNameElement = (Element)MobilePointNameList.item(0);
	                        
	                        NodeList MobilePointXList = classElement .getElementsByTagName("XKoordinat");
	                        Element MobilePointXElement = (Element)MobilePointXList.item(0);
	                        
	                        NodeList MobilePointYList = classElement .getElementsByTagName("YKoordinat");
	                        Element MobilePointYElement = (Element)MobilePointYList.item(0);
	                        
	                        NodeList MobilePointZList = classElement .getElementsByTagName("ZKoordinat");
	                        Element MobilePointZElement = (Element)MobilePointZList.item(0);
	                        
	                        NodeList DistanceList = classElement .getElementsByTagName("Distance");
	                        Element DistanceElement = (Element)DistanceList.item(0);

	                        NodeList textCLSNMList = MobilePointNameElement.getChildNodes();
	                        NodeList textCLSXList = MobilePointXElement.getChildNodes();
	                        NodeList textCLSYList = MobilePointYElement.getChildNodes();
	                        NodeList textCLSZList = MobilePointZElement.getChildNodes();
	                        NodeList textDistanceList = DistanceElement.getChildNodes();
	                           
	                           measurements.add(new MeasurementsPointsRecord(
	                           ((Node)textCLSXList .item(0)).getNodeValue().trim(),
	                           ((Node)textCLSYList .item(0)).getNodeValue().trim(),
	                           ((Node)textCLSZList .item(0)).getNodeValue().trim(),
	                           ((Node)textCLSNMList .item(0)).getNodeValue().trim(),
	                           ((Node)textFNList.item(0)).getNodeValue().trim(),
	                           ((Node)textDistanceList .item(0)).getNodeValue().trim()));
	                           }}}}
					    } catch (Exception e) {
			e.printStackTrace();
		    }
		    return measurements;
		    }

	
}
